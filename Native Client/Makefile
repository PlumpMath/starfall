## Copyright (c) 2013 Mark Farrell

STARFALL_DEPENDENCIES = $(HOME)/Development

POCO_DIR=poco-1.4.6p1-all

STARFALL_INCLUDES := -I $(STARFALL_DEPENDENCIES)/$(POCO_DIR)/Foundation/include
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/$(POCO_DIR)/Net/include
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/$(POCO_DIR)/Util/include 
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/$(POCO_DIR)/XML/include
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/$(POCO_DIR)/Data/include
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/$(POCO_DIR)/Data/SQLite/include
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/v8/include
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/glm

STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/glew-1.10.0/include
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/awesomium_1_7_1/Awesomium.framework/Headers
STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I  $(STARFALL_DEPENDENCIES)/SFML-2.1-osx-clang-universal/include

STARFALL_INCLUDES := $(STARFALL_INCLUDES) -I ../Common/Include

STARFALL_INCLUDES := $(STARFALL_INCLUDES)  -I Include

STARFALL_LIBRARIES := -L$(STARFALL_DEPENDENCIES)/$(POCO_DIR)/lib/Darwin/x86_64/
STARFALL_LIBRARIES := $(STARFALL_LIBRARIES) -L$(STARFALL_DEPENDENCIES)/v8/out/x64.release
STARFALL_LIBRARIES := $(STARFALL_LIBRARIES) -L$(STARFALL_DEPENDENCIES)/glew-1.10.0/lib
STARFALL_LIBRARIES := $(STARFALL_LIBRARIES) -L$(STARFALL_DEPENDENCIES)/SFML-2.1-osx-clang-universal/lib
STARFALL_LIBRARIES := $(STARFALL_LIBRARIES) -L../Common/lib

STARFALL_LINK := -lPocoFoundation -lPocoNet -lPocoUtil -lPocoData -lPocoDataSQLite
STARFALL_LINK := $(STARFALL_LINK) -lv8_base -lv8_nosnapshot
STARFALL_LINK := $(STARFALL_LINK) -lGLEW
STARFALL_LINK := $(STARFALL_LINK) -lsfml-system -lsfml-window -lsfml-graphics
STARFALL_LINK := $(STARFALL_LINK) -lcommon

STARFALL_CLIENT_SRC = Source/Starfall
STARFALL_CLIENT_SRCS := $(wildcard $(STARFALL_CLIENT_SRC)/*.cpp)

STARFALL_CLIENT_OBJ := obj
STARFALL_CLIENT_OBJS := $(patsubst $(STARFALL_CLIENT_SRC)/%.cpp, $(STARFALL_CLIENT_OBJ)/%.o, $(STARFALL_CLIENT_SRCS))

STARFALL_CLIENT_BIN := bin
STARFALL_CLIENT_RELEASE := client.release

.DEFAULT_GOAL := release

$(STARFALL_CLIENT_BIN):
	mkdir -p $(STARFALL_CLIENT_BIN)

$(STARFALL_CLIENT_OBJ):
	mkdir -p $(STARFALL_CLIENT_OBJ)

$(STARFALL_CLIENT_OBJ)/%.o: $(STARFALL_CLIENT_SRC)/%.cpp $(STARFALL_CLIENT_OBJ)
	$(CXX)  -c -o $@ $< $(STARFALL_INCLUDES) -Wno-deprecated-declarations

release: $(STARFALL_CLIENT_OBJS) $(STARFALL_CLIENT_BIN)
	$(CXX) $(STARFALL_CLIENT_OBJS) -o $(STARFALL_CLIENT_BIN)/$(STARFALL_CLIENT_RELEASE) $(STARFALL_LIBRARIES)  $(STARFALL_LINK)

.PHONY: clean

clean:
	rm -f $(STARFALL_CLIENT_OBJ)/*.o
	rm -d $(STARFALL_CLIENT_OBJ)
	rm -f $(STARFALL_CLIENT_BIN)/*
	rm -d $(STARFALL_CLIENT_BIN)
